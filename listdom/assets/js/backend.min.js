function ListdomLoadingWrapper(){this.wrap=jQuery("#wpwrap"),this.body=jQuery("body"),this.start=()=>{this.wrap.addClass("lsd-loading-wrapper"),this.body.addClass("lsd-not-scrollable")},this.stop=(e,t)=>{void 0===t&&(t=0),e&&this.wrap.prepend(e)&&e.removeClass("lsd-util-hide"),setTimeout(()=>{e&&e.addClass("lsd-util-hide"),this.wrap.removeClass("lsd-loading-wrapper"),this.body.removeClass("lsd-not-scrollable")},t)}}function listdom_trigger_toggle(){jQuery(".lsd-toggle").off("click").on("click",function(){const e=jQuery(this);var t=e.data("for"),s=e.data("for2"),a=e.data("all"),l=jQuery(t).is(":visible")?"show":"hide";a&&jQuery(a).hide(),"show"==l?(jQuery(t).hide(),s&&jQuery(s).removeClass("lsd-util-hide").show()):"hide"==l&&(jQuery(t).removeClass("lsd-util-hide").show(),s)&&jQuery(s).hide(),e.data("triggered",1),setTimeout(function(){e.data("triggered",0)},200)})}function listdom_trigger_select(){jQuery(".lsd-trigger-select-options").off("change").on("change",function(){var e=jQuery(this).find("option:selected"),t=e.data("lsd-show"),e=e.data("lsd-hide");t&&jQuery(t).removeClass("lsd-util-hide").show(),e&&jQuery(e).addClass("lsd-util-hide").hide()})}function listdom_trigger_bookable_remove(){jQuery(".lsd-remove-bookable-button").off("click").on("click",function(e){e.preventDefault();const t=jQuery(this);0===t.data("confirm")?(t.data("confirm",1),t.addClass("lsd-need-confirm"),setTimeout(function(){t.data("confirm",0),t.removeClass("lsd-need-confirm")},5e3)):t.parent().parent().parent().remove()})}function listdom_trigger_bookable_advanced(){jQuery(".lsd-bookable-advanced").off("click").on("click",function(){var e=jQuery(this).data("i"),e=jQuery("#lsd_listing_bookables_"+e+"_advanced");e.hasClass("lsd-util-hide")?e.removeClass("lsd-util-hide"):e.addClass("lsd-util-hide")})}function listdom_trigger_bookable_prices(){jQuery(".lsd-bookable-add-price-button").off("click").on("click",function(){var e=jQuery(this).data("i"),t=jQuery("#lsd_listing_bookables_"+e+"_advanced"),s=t.find(jQuery(".lsd-bookable-adv-start-date")),a=t.find(jQuery(".lsd-bookable-adv-end-date")),l=t.find(jQuery(".lsd-bookable-adv-price")),t=t.find(jQuery(".lsd-listing-bookables-prices")),i=s.val(),d=a.val(),o=l.val();""===i?s.trigger("focus"):""===d?a.trigger("focus"):""===o?l.trigger("focus"):(t.prepend('<li><i class="lsd-icon fas fa-trash-alt lsd-remove-bookable-price-button" data-confirm="0"></i> <span>'+i+" - "+d+": "+o+'</span><input type="hidden" name="lsd[bookables]['+e+'][prices][]" value="'+i+","+d+","+o+'"></li>'),listdom_trigger_bookable_price_remove())}),listdom_trigger_bookable_price_remove(),jQuery(".lsd-bookable-add-unavailable-button").off("click").on("click",function(){var e=jQuery(this).data("i"),t=jQuery("#lsd_listing_bookables_"+e+"_advanced"),s=t.find(jQuery(".lsd-bookable-unavailable-start-date")),a=t.find(jQuery(".lsd-bookable-unavailable-end-date")),t=t.find(jQuery(".lsd-listing-bookables-unavailable-periods")),l=s.val(),i=a.val();""===l?s.trigger("focus"):""===i?a.trigger("focus"):(t.prepend('<li><i class="lsd-icon fas fa-trash-alt lsd-remove-bookable-unavailable-button" data-confirm="0"></i> <span>'+l+" - "+i+'</span><input type="hidden" name="lsd[bookables]['+e+'][unavailable][]" value="'+l+","+i+'"></li>'),listdom_trigger_bookable_unavailable_remove())}),listdom_trigger_bookable_unavailable_remove()}function listdom_trigger_bookable_price_remove(){jQuery(".lsd-remove-bookable-price-button").off("click").on("click",function(e){e.preventDefault();const t=jQuery(this);0===t.data("confirm")?(t.data("confirm",1),t.addClass("lsd-need-confirm"),setTimeout(function(){t.data("confirm",0),t.removeClass("lsd-need-confirm")},5e3)):t.parent().remove()})}function listdom_trigger_bookable_unavailable_remove(){jQuery(".lsd-remove-bookable-unavailable-button").off("click").on("click",function(e){e.preventDefault();const t=jQuery(this);0===t.data("confirm")?(t.data("confirm",1),t.addClass("lsd-need-confirm"),setTimeout(function(){t.data("confirm",0),t.removeClass("lsd-need-confirm")},5e3)):t.parent().remove()})}function listdom_trigger_autosuggest_remove(){jQuery(".lsd-autosuggest-current .lsd-icon").off("click").on("click",function(e){e.preventDefault();const t=jQuery(this);0===t.data("confirm")?(t.data("confirm",1),t.parent().addClass("lsd-need-confirm"),setTimeout(function(){t.data("confirm",0),t.parent().removeClass("lsd-need-confirm")},5e3)):t.parent().remove()})}function lsdaddjob_new_category(e){jQuery("#lsd_dashboard").data("job-addon-installed")&&jQuery.ajax({url:lsd.ajaxurl,type:"POST",data:{action:"lsdaddjob_is_job",category:e},dataType:"json"}).done(function(e){e.success&&(e.is_job&&(e.modules,1)?e.modules.forEach(function(e){var t=jQuery(".lsd-listing-module-"+e);t.addClass("lsd-util-hide"),t.find("[required]").removeAttr("required"),"attributes"===e?jQuery(".lsd-dashboard-attributes > h4").addClass("lsd-util-hide"):"address"===e&&jQuery(".lsd-dashboard-address > h4").addClass("lsd-util-hide")}):e.modules.forEach(function(e){jQuery(".lsd-listing-module-"+e).removeClass("lsd-util-hide"),"attributes"===e?jQuery(".lsd-dashboard-attributes > h4").removeClass("lsd-util-hide"):"address"===e&&jQuery(".lsd-dashboard-address > h4").removeClass("lsd-util-hide")}))})}!function(y){y.fn.listdomSearchBuilder=function(e){const d=y.extend({has_more_features:!1},e),o=y(".lsd-search-fields-metabox"),t=y("#lsd_search_add_row"),s=y("#lsd_search_more_options"),a=y(".lsd-search-row-actions-delete"),l=y(".lsd-search-field-actions-delete"),i=y(".lsd-search-method"),n=y(".lsd-search-title"),r=y(".lsd-search-sandbox"),c=y("#lsd_search_available_fields"),u=y(".lsd-search-row"),p=y(".lsd-search-field-all-terms select");function f(){var e=y(".lsd-search-sandbox > div").length+1;const t=y('<div class="lsd-search-row" id="lsd_search_row_'+e+'" data-i="'+e+'"><input type="hidden" name="lsd[fields]['+e+'][type]" value="row"><div class="lsd-search-filters"></div><ul class="lsd-search-row-actions"><li class="lsd-search-row-actions-sort lsd-row-handler"><i class="lsd-icon fas fa-arrows-alt"></i></li><li class="lsd-search-row-actions-delete lsd-tooltip" data-lsd-tooltip="'+lsd.i18n_field_delete+'" data-confirm="0" data-i="'+e+'"><i class="lsd-icon fas fa-trash-alt"></i></li></ul></div>');r.append(t),t.droppable({accept:".lsd-search-field",drop:function(e,t){h(y(this),t.draggable)}}),t.find(".lsd-search-filters").sortable({handle:".lsd-handler",start:function(e,t){y(t.item).addClass("lsd-field-dragging")},stop:function(e,t){y(t.item).removeClass("lsd-field-dragging")}}),r.sortable("refresh"),t.find(".lsd-search-row-actions-delete").off("click").on("click",function(){m(y(this))}),y.ajax({url:d.ajax_url,data:"action=lsd_search_builder_row_params&i="+e,dataType:"json",type:"post",success:function(e){1===e.success&&t.find(".lsd-search-row-actions").after(e.html)},error:function(){}})}function h(t,s){const a=t.data("i"),l=s.data("key");var e=s.prop("id");if(!t.find("#"+e).length){o.fadeTo(200,.7);let e=s.find(y("strong")).text();const i=t.find(".lsd-search-filters");s.find(".lsd-search-field-actions").length&&(e=s.find('input[name*="title"]').val()),s.remove(),y.ajax({url:d.ajax_url,data:"action=lsd_search_builder_params&i="+a+"&key="+l+"&title="+encodeURIComponent(e),dataType:"json",type:"post",success:function(e){1===e.success&&(i.append(e.html),i.sortable("refresh"),(e=y("#lsd_search_field_"+a+"_"+l)).find(".lsd-search-field-actions-delete").off("click").on("click",function(){g(y(this))}),e.find(".lsd-search-method").on("change",function(){_(y(this))}).trigger("change"),e.find(".lsd-search-title").on("change",function(){v(y(this))}).trigger("change"),e.find(y(".lsd-search-field-all-terms select")).on("change",function(){var e=y(this);"1"===e.val()?e.parent().parent().find(y(".lsd-search-field-terms")).addClass("lsd-util-hide"):e.parent().parent().find(y(".lsd-search-field-terms")).removeClass("lsd-util-hide")}),e.find('select[multiple=""]').each(function(){y(this).select2({allowClear:y(this).attr("multiple"),placeholder:y(this).attr("placeholder"),minimumResultsForSearch:0,shouldFocusInput:()=>!1})})),o.fadeTo(200,1)},error:function(){o.fadeTo(200,1)}})}}function m(e){if(0===e.data("confirm"))return b(e);e=e.data("i"),e=y("#lsd_search_row_"+e);"more_options"===e.find('input[name*="type"]').val()&&s.removeAttr("disabled"),e.find(".lsd-search-field-actions-delete").data("confirm",1).trigger("click"),e.remove()}function g(e){if(0===e.data("confirm"))return b(e);var t=e.data("i"),e=e.data("key"),t=y("#lsd_search_field_"+t+"_"+e),s=t.find('input[name*="title"]').val();t.remove(),c.append('<div class="lsd-search-field" id="lsd_search_available_fields_'+e+'" data-key="'+e+'"><strong>'+s+"</strong></div>")}function _(e){var t=e.closest(".lsd-search-field"),e=e.val();t.find(".lsd-search-method-dependant").hide(),t.find(".lsd-search-method-"+e).show()}function v(e){var t=e.closest(".lsd-search-field"),e=e.val();t.find(".lsd-search-field-title-dependant").hide(),t.find(".lsd-search-title-"+e).show()}function b(e){e.data("confirm",1),e.addClass("lsd-need-confirm"),setTimeout(function(){e.data("confirm",0),e.removeClass("lsd-need-confirm")},1e4)}t.off("click").on("click",function(){f()}),s.off("click").on("click",function(){!function(){if(y(".lsd-search-more-options").length)return s.prop("disabled","disabled");var e=y(".lsd-search-row").length+1,e=y('<div class="lsd-search-more-options" id="lsd_search_row_'+e+'" data-i="'+e+'"><span class="lsd-search-more-options-label">'+lsd.i18n_field_search+'</span><input type="hidden" name="lsd[fields]['+e+'][type]" value="more_options"><ul class="lsd-search-row-actions"><li class="lsd-search-row-actions-sort lsd-row-handler"><i class="lsd-icon fas fa-arrows-alt"></i></li><li class="lsd-search-row-actions-delete lsd-tooltip" data-lsd-tooltip="'+lsd.i18n_field_delete+'" data-confirm="0" data-i="'+e+'"><i class="lsd-icon fas fa-trash-alt"></i></li></ul></div>');r.append(e),s.prop("disabled","disabled"),r.sortable("refresh"),e.find(".lsd-search-row-actions-delete").off("click").on("click",function(){m(y(this))})}(),f()}),a.off("click").on("click",function(){m(y(this))}),l.off("click").on("click",function(){g(y(this))}),y("#lsd_search_available_fields").on("mouseover","div:not(.ui-draggable)",function(){y(this).draggable({revert:"invalid"})}),u.droppable({accept:".lsd-search-field",drop:function(e,t){h(y(this),t.draggable)}}),u.find(".lsd-search-filters").sortable({handle:".lsd-field-handler",start:function(e,t){y(t.item).addClass("lsd-field-dragging")},stop:function(e,t){y(t.item).removeClass("lsd-field-dragging")}}),r.sortable({handle:".lsd-row-handler"}),i.on("change",function(){_(y(this))}).trigger("change"),n.on("change",function(){v(y(this))}).trigger("change"),p.on("change",function(){var e=y(this);"1"===e.val()?e.parent().parent().find(y(".lsd-search-field-terms")).addClass("lsd-util-hide"):e.parent().parent().find(y(".lsd-search-field-terms")).removeClass("lsd-util-hide")}),u.find('select[multiple=""]').each(function(){y(this).select2({allowClear:y(this).attr("multiple"),placeholder:y(this).attr("placeholder"),minimumResultsForSearch:0,shouldFocusInput:()=>!1})}),y(".lsd-search-more-options").length&&s.prop("disabled","disabled")}}(jQuery),jQuery(document).ready(function(r){listdom_trigger_toggle(),listdom_trigger_select(),jQuery("a#deactivate-listdom, a#deactivate-listdom-pro").on("click",function(e){const s=r(this),a=jQuery("#lsd_deactivation_feedback_message"),l=s.attr("href").includes("plugin=listdom-pro");if(s.attr("href").includes("action=deactivate")&&s.attr("href").includes("plugin=listdom")){e.preventDefault();const i=jQuery("#lsd-deactivate-feedback-dialog-wrapper"),d=(i.removeClass("lsd-util-hide"),jQuery("#skip-deactivate-plugin").focus(),i.off("click").on("click",function(e){r(e.target).is(i)&&i.addClass("lsd-util-hide")}),jQuery("#lsd-deactivate-feedback-dialog-form"));d.find('button[type="submit"]').off("click").on("click",function(e){e.preventDefault();e=r(this).val();if("submit_feedback"===e){const t=r(this);t.prop("disabled",!0),lsd&&lsd.ajaxurl?r.ajax({url:lsd.ajaxurl,method:"POST",data:d.serialize()+"&pro="+(l?1:0),dataType:"json",success:function(e){e.success?(a.html(listdom_alertify(e.message,"lsd-success")),setTimeout(()=>i.addClass("lsd-util-hide"),1e3),window.location.href=s.attr("href")):a.html(listdom_alertify(e.message,"lsd-error"))},error:function(){a.html(listdom_alertify("An unexpected error occurred.","lsd-error"))},complete:function(){t.prop("disabled",!1)}}):(a.html(listdom_alertify("Error: AJAX URL not defined.","lsd-error")),t.prop("disabled",!1))}else"skip_deactivate"===e&&(r(this).prop("disabled",!0),setTimeout(()=>i.addClass("lsd-util-hide"),1e3),window.location.href=s.attr("href"))})}}),r(".lsd-deactivate-feedback-dialog-input").on("change",function(){r(".lsd-feedback-text-wrapper").addClass("lsd-util-hide"),r(this).is(":checked")&&r(this).closest(".lsd-deactivate-feedback-dialog-input-wrapper").find(".lsd-feedback-text-wrapper").removeClass("lsd-util-hide")}),r(".lsd-accordion-title").on("click",function(e){let t=!1;r(this).hasClass("lsd-accordion-active")&&(t=!0),r(".lsd-accordion-title").not(r(this).parents(".lsd-accordion-panel").prev(".lsd-accordion-title")).removeClass("lsd-accordion-active"),r(".lsd-accordion-panel").not(r(this).parents(".lsd-accordion-panel")).removeClass("lsd-accordion-open"),t||(r(this).toggleClass("lsd-accordion-active"),r(this).next().toggleClass("lsd-accordion-open"),e.stopPropagation())}),void 0!==r.fn.fontIconPicker&&r(".lsd-iconpicker").fontIconPicker({emptyIcon:!1,emptyIconValue:""}),r(".lsd-color-box").on("click",function(){var e=r(this).parent(),t=(e.find(".lsd-color-box").removeClass("lsd-color-box-active"),r(this).addClass("lsd-color-box-active"),r(this).data("color"));r(e.data("for")).wpColorPicker("color",t)}),void 0!==r.fn.wpColorPicker&&r(".lsd-colorpicker").wpColorPicker(),r(".lsd-select-image-button").on("click",function(e){e.preventDefault();const s=r(this);let a;(a=wp.media()).on("select",function(){var e=a.state().get("selection").first(),t=r(s).data("for");r(t+"_img").html('<img alt="" src="'+e.attributes.url+'">'),r(t).val(e.id),r(".lsd-select-image-button").toggleClass("lsd-util-hide"),r(".lsd-remove-image-button").toggleClass("lsd-util-hide"),a.close()}),a.open()}),r(".lsd-remove-image-button").on("click",function(e){e.preventDefault();e=r(this).data("for");r(e+"_img").html(""),r(e).val(""),r(".lsd-select-image-button").toggleClass("lsd-util-hide"),r(".lsd-remove-image-button").toggleClass("lsd-util-hide")}),r(".lsd-sortable").sortable(),r(".lsd-switch input[type=checkbox]").on("change",function(){var e=r(this).parent().find(r(".lsd-toggle"));e.data("triggered")||e.trigger("click")}),r("#lsd_all_categories").on("change",function(){r(this).is(":checked")?r("#lsd_categories_wp").addClass("lsd-util-hide"):r("#lsd_categories_wp").removeClass("lsd-util-hide")}),r("#lsd_field_type").on("change",function(){var e=r(this).val();r(".lsd-field-type-dependent").hide(),r(".lsd-field-type-dependent.lsd-field-type-"+e).show()}).trigger("change"),r("#lsd_editor, #lsd_required").on("change",function(){var e=r(this).is(":checked"),t=r(this).attr("name");e&&("lsd_editor"===t?r("#lsd_required").removeAttr("checked"):"lsd_required"===t&&r("#lsd_editor").removeAttr("checked"))}),r(".lsd-details-page-element-toggle-status strong").on("click",function(){var e=r(this).parent().data("key");r(this).hasClass("lsd-enabled")?(r(this).addClass("lsd-util-hide"),r("#lsd_actions_"+e+" .lsd-disabled").removeClass("lsd-util-hide"),r('input[name="lsd[elements]['+e+'][enabled]"]').val("0"),r("#lsd_element_"+e).addClass("lsd-element-disabled")):(r(this).addClass("lsd-util-hide"),r("#lsd_actions_"+e+" .lsd-enabled").removeClass("lsd-util-hide"),r('input[name="lsd[elements]['+e+'][enabled]"]').val("1"),r("#lsd_element_"+e).removeClass("lsd-element-disabled"))}),r("#lsd_details_page_style").on("change",function(){var e=r(this).val(),t=r("ul.lsd-elements"),s=r("#lsd_dynamic_switcher");r(".lsd-style-dependency").addClass("lsd-util-hide"),r(".lsd-style-dependency-"+e).removeClass("lsd-util-hide"),"style1"!==e?(t.removeClass("lsd-sortable"),t.sortable("disable")):(t.addClass("lsd-sortable"),t.sortable("enable")),"dynamic"===e?s.removeClass("lsd-util-hide"):(s.find(r("li[data-tab=config] a")).trigger("click"),s.addClass("lsd-util-hide"))}).trigger("change"),r(".lsd-builder-column input[type=checkbox]").on("change",function(){const s=r(this);var e=s.parent(),t=e.data("key");s.is(":checked")?e.removeClass("lsd-builder-element-disabled").addClass("lsd-builder-element-enabled"):e.removeClass("lsd-builder-element-enabled").addClass("lsd-builder-element-disabled"),"map"===t&&s.is(":checked")&&r(`.lsd-builder-column li[data-key=${t}] input[type=checkbox]`).each(function(e,t){s.prop("id")!==r(t).prop("id")&&r(t).prop("checked",!1).trigger("change")})}),r(".lsd-map-provider-toggle").on("change",function(){var e=r(this).data("parent"),t=r(this).val();r(e+" .lsd-map-provider-dependency").hide(),r(e+" .lsd-map-provider-dependency-"+t).show()}).trigger("change"),r(".lsd-display-options-style-toggle").on("change",function(){var e=r(this).data("parent"),t=r(this).val();r(e+" .lsd-display-options-style-dependency").hide(),r(e+" .lsd-display-options-style-dependency-"+t).show()}).trigger("change"),r("#lsd_display_options_skin").on("change",function(){var e=r(this).val(),t=(r(".lsd-skin-display-options").hide(),r("#lsd_skin_display_options_"+e).show(),r("#lsd_metabox_search")),t=("carousel"===e||"slider"===e||"cover"===e?t.hide():t.show(),r("#lsd_metabox_filter_options")),s=r("#lsd_metabox_default_sort"),t=("cover"===e?(t.hide(),s.hide()):(t.show(),s.show()),r("#lsd_metabox_sort_options"));"singlemap"===e||"masonry"===e||"carousel"===e||"slider"===e||"cover"===e?t.hide():t.show(),r("#lsd_display_options_skin_list_map_provider, #lsd_display_options_skin_grid_map_provider, #lsd_display_options_skin_listgrid_map_provider, #lsd_display_options_skin_halfmap_map_provider, #lsd_display_options_skin_singlemap_map_provider").trigger("change"),r(".lsd-display-options-style-selector").trigger("change")}).trigger("change"),r("#lsd_display_options_skin_list_map_provider, #lsd_display_options_skin_grid_map_provider, #lsd_display_options_skin_listgrid_map_provider, #lsd_display_options_skin_halfmap_map_provider, #lsd_display_options_skin_singlemap_map_provider").on("change",function(){var e=r("#lsd_display_options_skin").val(),t=r("#lsd_display_options_skin_"+e+"_map_provider").val(),s=r("#lsd_metabox_map_controls"),e=r("#lsd_display_options_skin_"+e+"_map_options");void 0===t||"0"===t?(e.addClass("lsd-util-hide"),s.hide()):"leaflet"===t?(e.removeClass("lsd-util-hide"),s.hide()):(e.removeClass("lsd-util-hide"),s.show())}).trigger("change"),r(".lsd-display-options-style-selector").on("change",function(){var e,t,s;r(this).is(":visible")&&(e=r(this).val(),t=r(".lsd-display-options-builder-skin"),s=r(".lsd-display-options-builder-option"),!isNaN(parseFloat(e))&&isFinite(e)?(t.removeClass("lsd-util-hide"),s.addClass("lsd-util-hide")):(t.addClass("lsd-util-hide"),s.removeClass("lsd-util-hide")))}).trigger("change"),r("#lsd_sort_options_orderby").on("change",function(){var e=r(this).val();0<r("#lsd-sort-options-"+e).find("input").filter(":disabled").length&&r('.lsd-sort-option-toggle[data-key="'+e+'"]').trigger("click")}),r(".lsd-sort-option-toggle").on("click",function(){var e=r(this).data("key"),t=r("#lsd-sort-options-"+e+"-status"),e=r("#lsd-sort-options-"+e),s=t.val();1===parseInt(s)?(t.val(0),e.find("input[type=text], select").attr("disabled","disabled"),r(this).find("i").removeClass("fa-check").addClass("fa-minus-circle")):(t.val(1),e.find("input[type=text], select").removeAttr("disabled"),r(this).find("i").removeClass("fa-minus-circle").addClass("fa-check"))}),r("#lsd_notification_content_hook").on("change",function(){var e=r(this).val();r(".lsd-placeholder-item").hide(),r(".lsd-placeholder-"+e).show(),r(".lsd-placeholder-general").show()}).trigger("change"),r("#lsd_addons_franchise_category").on("change",function(){var e=r(this).val(),t=r(".lsd-franchise-certain-category");e?t.removeClass("lsd-util-hide"):t.addClass("lsd-util-hide")}),r(".lsd-tab-switcher li a").on("click",function(e){e.preventDefault();var e=r(this).parent(),t=e.parent(),s=t.data("for"),s=r(s),t=(t.find(r("li")).removeClass("lsd-sub-tabs-active"),e.addClass("lsd-sub-tabs-active"),e.data("tab"));s.removeClass("lsd-tab-switcher-content-active"),r(`#lsd-tab-switcher-${t}-content`).addClass("lsd-tab-switcher-content-active")}),r(".lsd-skin-style-options .lsd-skin-style-option").on("click",function(){var e=r(this),t=e.data("skin");r("#lsd_display_options_skin").val(t).trigger("change"),r(".lsd-skin-style-option").removeClass("selected"),e.addClass("selected")}),r(".lsd-settings-dashboard-menus").sortable({cancel:".lsd-custom-menu-content"}),r("body").on("click",".lsd-custom-menu-btn",function(){var e=r('<li class="lsd-custom-menu-list"><p><span class="lsd-custom-menu-label">'+lsd.i18n_field_label+'</span><span class="lsd-custom-menu-actions"><i class="fas fa-trash"></i> <i class="fas fa-chevron-down"></i></span></p><div class="lsd-custom-menu-content"></div></li>');r(".lsd-settings-dashboard-menus").append(e);const d=e.find(".lsd-custom-menu-content");var t=r("<input>",{type:"hidden",name:"lsd[dashboard_menus][]",class:"custom-menu-id"});const o={Label:lsd.i18n_placeholder_label,Slug:lsd.i18n_placeholder_slug,Icon:lsd.i18n_placeholder_icon,Content:""},n={Label:lsd.i18n_description_label,Slug:lsd.i18n_description_slug,Icon:lsd.i18n_description_icon,Content:lsd.i18n_description_content};["Label","Slug","Icon","Content"].forEach(e=>{var t,s=e.toLowerCase().replace(/\s+/g,"_");if("Icon"===e){var a=r("<label></label>").html(`<div class="lsd-mb-2">${e}</div>`);const i=r("<select>",{name:"",required:!0,"data-field":"icon",class:"lsd-iconpicker",id:"lsd_icon"});lsd.icon_options.forEach(e=>{e=r("<option>",{value:e.value,text:e.label});i.append(e)}),a.append(i),d.append(a),void 0!==r.fn.fontIconPicker&&i.fontIconPicker({emptyIcon:!1,emptyIconValue:""})}else"Content"===e?(a=r("<label></label>"),l="textarea_"+Date.now(),t=r("<textarea>",{name:"",id:l,"data-field":"content"}),a.append(t),d.append(a),wp.editor.initialize(l,{tinymce:{toolbar1:"formatselect bold italic underline bullist numlist blockquote alignleft aligncenter alignright link unlink wp_more fullscreen",plugins:"lists paste link"},quicktags:!0,mediaButtons:!0})):(t=r("<label></label>").text(e),a=r("<input>",{type:"text",name:"",required:!0,"data-field":s,placeholder:o[e]}),t.append(a),d.append(t));var l=r("<p></p>").text(n[e]).addClass("description");d.append(l)}),e.append(t)}),r(document).on("input",'.lsd-custom-menu-list input[data-field="slug"]',function(){var e=r(this),t=e.closest(".lsd-custom-menu-list").find(".custom-menu-slug"),s=e.closest(".lsd-custom-menu-content"),a=s.find("input[data-field]"),l=s.find("select.lsd-iconpicker"),s=s.find("textarea");const i=e.val().toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"");t.val(i),a.each(function(){var e=r(this),t=e.data("field");e.attr("name",`lsd[dashboard_menu_custom][${i}][${t}]`)}),l.each(function(){r(this).attr("name",`lsd[dashboard_menu_custom][${i}][icon]`)}),s.each(function(){r(this).attr("name",`lsd[dashboard_menu_custom][${i}][content]`)}),e.val(i),t.val(i)}),r(document).on("input",'.lsd-custom-menu-list input[data-field="label"]',function(){r(this).closest(".lsd-custom-menu-list").find(".lsd-custom-menu-label").html(r(this).val())}),r(document).on("blur",'.lsd-custom-menu-list input[data-field="label"]',function(){var e=r(this),t=e.closest(".lsd-custom-menu-list").find('input[data-field="slug"]');""===t.val().trim()&&(e=e.val().trim().toLowerCase().replace(/\s+/g,"-"),t.val(e).trigger("input"))}),r(document).on("click",".lsd-custom-menu-list .fa-trash",function(){r(this).closest(".lsd-custom-menu-list").remove()}),r(document).on("click",".lsd-custom-menu-list .fa-chevron-down",function(){r(this).closest(".lsd-custom-menu-list").find(".lsd-custom-menu-content").toggle()});var e=r("#lsd_details_page_detail_type");const a=r("#lsd_details_page_style"),l=a.find("option").map(function(){return{value:r(this).val().trim(),text:r(this).text()}}).get();if(e.change(function(){var t,e,s=r(this).val(),s=(t=s,l.filter(e=>"premade"===t?e.value.includes("style"):"dynamic"===t?"dynamic"===e.value:"elementor"!==t||!isNaN(e.value)));s=s,e=a.val(),a.empty(),0===s.length?a.append(r("<option></option>").attr("value","").text("No Style exists")):(s.forEach(e=>{a.append(r("<option></option>").attr("value",e.value).text(e.text))}),a.find(`option[value="${e}"]`).length&&a.val(e)),a.trigger("change")}),e.trigger("change"),"undefined"!=typeof inlineEditPost){const i=inlineEditPost.edit;inlineEditPost.edit=function(e){i.apply(this,arguments),"object"==typeof e&&(e=parseInt(this.getId(e)));var t=r("#edit-"+e),s=r("#post-"+e),s=r(".column-style",s).text();r("#lsd_displ_style",t).val(s)}}void 0!==r.fn.select2&&jQuery("#lsd_metabox_filter_options select").select2({allowClear:!0})}),function(p){p(document).ready(function(){var t,s;t=".lsd-auth-switch-button",s=200,jQuery(".lsd-auth-form-content").first().show(),jQuery(t).first().addClass("active"),jQuery(t).on("click",function(){let e=jQuery(this).data("target");jQuery(".lsd-auth-form-content:visible").fadeOut(s,function(){jQuery(e).fadeIn(s)}),jQuery(t).removeClass("active"),jQuery(this).addClass("active"),jQuery(t).filter(function(){return jQuery(this).data("target")===e}).addClass("active")});var e,a,l,i=new URLSearchParams(window.location.search).get("tab");i&&(e=jQuery('.lsd-auth-switch-button[data-target="#lsd-login-form"]'),a=jQuery('.lsd-auth-switch-button[data-target="#lsd-register-form"]'),l=jQuery('.lsd-auth-switch-button[data-target="#lsd-forgot-password-form"]'),"login"===i?e.trigger("click").addClass("active"):"register"===i?a.trigger("click").addClass("active"):"lostpassword"===i&&l.trigger("click").addClass("active")),p(".lsd-tabs .nav-tab").on("click",function(){var e=p(this).data("key");p(".nav-tab").removeClass("nav-tab-active"),p(this).addClass("nav-tab-active"),p(".lsd-tab-content").removeClass("lsd-tab-content-active"),p("#lsd_tab_content_"+e).addClass("lsd-tab-content-active")}),p(".lsd-select-gallery-button").on("click",function(e){e.preventDefault();const a=p(this);let l;(l=wp.media({multiple:!0})).on("select",function(){var e=l.state().get("selection");const t=p(a).data("for"),s=p(a).data("name");e.map(function(e){e=e.toJSON(),p(t).append('<li data-id="'+e.id+'"><input type="hidden" name="'+s+'" value="'+e.id+'"><img src="'+e.url+'" alt=""><div class="lsd-gallery-actions"><i class="lsd-icon fas fa-trash-alt lsd-remove-gallery-single-button"></i> <i class="lsd-icon fas fa-arrows-alt lsd-handler"></i></div></li>')}),p(".lsd-remove-gallery-button").toggleClass("lsd-util-hide"),l.close(),p(".lsd-remove-gallery-single-button").off("click").on("click",function(e){e.preventDefault(),p(this).parent().parent().remove()})}),l.open()}),p(".lsd-upload-gallery-button").on("click",function(e){e.preventDefault(),p("#lsd_listing_gallery_uploader").click()}),p(".lsd-remove-gallery-button").on("click",function(e){e.preventDefault();e=p(this).data("for");p(e).html(""),p(this).toggleClass("lsd-util-hide")}),p(".lsd-remove-gallery-single-button").off("click").on("click",function(e){e.preventDefault(),p(this).parent().parent().remove()}),p(document).on("click",".lsd-embed-featured-icon",function(){var e=p(this),t="1"===e.attr("data-featured");e.closest("li").find(".lsd-embed-code");t?e.removeClass("fas fa-star").addClass("far fa-star").attr("title","Add as Featured Video").attr("data-featured","0").closest("li").find(".lsd-embed-featured-status").val("0"):(p('.lsd-embed-featured-icon[data-featured="1"]').removeClass("fas fa-star").addClass("far fa-star").attr("title","Add as Featured Video").attr("data-featured","0").closest("li").find(".lsd-embed-featured-status").val("0"),e.removeClass("far fa-star").addClass("fas fa-star").attr("title","Remove From Featured Video").attr("data-featured","1").closest("li").find(".lsd-embed-featured-status").val("1"))}),p(".lsd-add-embed-button").on("click",function(e){e.preventDefault();var e=p(this).data("template"),t=p(this).data("for"),s=p("#lsd_listing_embeds_index"),a=s.val(),l=parseInt(a)+1,s=(s.val(l),p(e).html().replace(/:i:/g,a));p(t).append(s),p(".lsd-remove-embed-single-button").off("click").on("click",function(e){e.preventDefault(),p(this).parent().parent().parent().remove()})}),p(".lsd-remove-embed-button").on("click",function(e){e.preventDefault();e=p(this).data("for");p(e).html(""),p(this).toggleClass("lsd-util-hide")}),p(".lsd-remove-embed-single-button").off("click").on("click",function(e){e.preventDefault(),p(this).parent().parent().parent().remove()}),p(".lsd-select-file-button").on("click",function(e){e.preventDefault();const s=p(this);let a;(a=wp.media()).on("select",function(){var e=a.state().get("selection").first(),t=p(s).data("for");p(t+"_file").html('<a href="'+e.attributes.url+'" target="_blank">'+e.attributes.url+"</a>"),p(t).val(e.id),p(".lsd-select-file-button").toggleClass("lsd-util-hide"),p(".lsd-remove-file-button").toggleClass("lsd-util-hide"),a.close()}),a.open()}),p(".lsd-remove-file-button").on("click",function(e){e.preventDefault();e=p(this).data("for");p(e+"_file").html(""),p(e).val(""),p(".lsd-select-file-button").toggleClass("lsd-util-hide"),p(".lsd-remove-file-button").toggleClass("lsd-util-hide")}),p(".lsd-add-bookable-button").on("click",function(e){e.preventDefault();var e=p(this).data("template"),t=p(this).data("for"),s=p("#lsd_listing_bookables_index"),a=s.val(),l=parseInt(a)+1,s=(s.val(l),p(e).html().replace(/:i:/g,a));p(t).append(s),listdom_trigger_bookable_remove(),listdom_trigger_bookable_advanced(),listdom_trigger_bookable_prices(),listdom_trigger_toggle()}),p("#lsd_bo_type").on("change",function(){var e=p(this).val();p(".lsd-listing-bookable-container").removeClass("lsd-listing-bookables-general").removeClass("lsd-listing-bookables-property").removeClass("lsd-listing-bookables-event").addClass("lsd-listing-bookables-"+e)}),listdom_trigger_bookable_remove(),listdom_trigger_bookable_advanced(),listdom_trigger_bookable_prices(),p("#lsd_listing_category").on("change",function(){var e=p(this).val(),t=p(".lsd-category-specific"),s=p(".lsd-category-specific-all"),a=p(".lsd-category-specific-"+e),l=p('input[data-required="1"], select[data-required="1"], textarea[data-required="1"]');t.addClass("lsd-util-hide"),s.removeClass("lsd-util-hide"),a.removeClass("lsd-util-hide"),t.find(p("input[required], select[required], textarea[required]")).removeAttr("required"),s.find(l).attr("required",!0),a.find(l).attr("required",!0),lsdaddjob_new_category(e)}).trigger("change"),p(".lsd-ava-off").on("change",function(){var e=p(this).data("daycode");p(this).is(":checked")?p("#lsd-ava-"+e+" .lsd-ava-hours input").attr("disabled","disabled").addClass("disabled"):p("#lsd-ava-"+e+" .lsd-ava-hours input").removeAttr("disabled").removeClass("disabled")}).trigger("change"),p("#lsd_object_type_address").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1});let u;p(".lsd-autosuggest").on("keyup",function(){const s=p(this);var e=s.val(),t=s.data("min-characters");const a=s.data("max-items");var l=s.data("source");const i=s.data("name");var d=s.data("nonce"),o=s.data("append");const n=p(o),r=s.parent(),c=p(s.data("suggestions"));if(e.length<t)return!1;u&&u.abort(),u=p.ajax({url:lsd.ajaxurl,data:"action=lsd_autosuggest&_wpnonce="+d+"&term="+e+"&source="+l,dataType:"json",type:"post",success:function(e){e.success&&(r.addClass("lsd-has-suggestions"),c.html(e.items),c.find(p("li")).off("click").on("click",function(){var e=p(this),t=e.data("value"),e=e.text();a&&n.find(p("span")).length>=a||(n.find(p(".lsd-autosuggest-items-"+t)).length||(n.append('<span class="lsd-tooltip lsd-autosuggest-items-'+t+'" data-lsd-tooltip="Click twice to delete">'+e+' <i class="lsd-icon far fa-trash-alt" data-value="'+t+'" data-confirm="0"></i><input type="hidden" name="'+i+'[]" value="'+t+'"></span>'),listdom_trigger_autosuggest_remove()),s.val(""),c.html(""),r.removeClass("lsd-has-suggestions"))}))}})}),listdom_trigger_autosuggest_remove(),void 0!==p.fn.daterangepicker&&p("input.lsd-date-range-picker").each(function(){var e=p(this),t=e.data("periods");const s=e.data("format");var a={};for(const l in t)a[t[l]]=[moment().add(l,"month").startOf("month"),moment().add(l,"month").endOf("month")];e.daterangepicker({minDate:moment(),ranges:a,alwaysShowCalendars:!0,showCustomRangeLabel:!1,autoUpdateInput:!1,locale:{format:s}}),e.on("apply.daterangepicker",function(e,t){p(this).val(t.startDate.format(s)+" - "+t.endDate.format(s))}),e.on("cancel.daterangepicker",function(){p(this).val("")})}),p(".lsd-uploader input[type=file]").on("change",function(e){e.preventDefault();var t=p(this),e=t.data("key"),s=t.data("nonce"),a=p("#lsd_uploader_"+e+"_wrapper");const l=a.find(p(".lsd-uploader-preview")),i=a.find(p("input.lsd-uploader-value")),d=p("#lsd_uploader_"+e+"_message");var o=new FormData,n=(o.append("action","lsd_uploader"),o.append("key",e),o.append("_wpnonce",s),t.prop("files").length);for(let e=0;e<n;e++)o.append("files[]",t.prop("files")[e]);d.html(""),p.ajax({url:lsd.ajaxurl,type:"POST",data:o,dataType:"json",processData:!1,contentType:!1}).done(function(e){if(e.success){let t="";l.length&&(l.html(""),e.data.map(function(e){l.append('<a href="'+e.url+'" target="_blank">'+e.url+"</a><br>")})),e.data.map(function(e){t+=e.id+","}),d.html(listdom_alertify(e.message,"lsd-success")),i.val(t)}else d.html(listdom_alertify(e.message,"lsd-error"));setTimeout(function(){d.html("")},5e3)})})})}(jQuery);let listdom_googlemaps_callbacks=[];function listdom_add_googlemaps_callbacks(e){return!(void 0===e||!jQuery.isFunction(e)||(listdom_did_googlemaps_callbacks?e():listdom_googlemaps_callbacks.push(e),0))}function listdom_get_googlemaps_callbacks(){return listdom_googlemaps_callbacks}let listdom_did_googlemaps_callbacks=!1;function listdom_googlemaps_callback(){for(var e in listdom_did_googlemaps_callbacks=!0,listdom_get_googlemaps_callbacks())listdom_googlemaps_callbacks[e]()}function listdom_alertify(e,t){return'<div class="lsd-alert '+t+'">'+e+"</div>"}